image: informaticsmatters/rdkit-python3-debian:latest

variables:
    PIP_CACHE_DIR: "$CI_PROJECT_DIR/.cache/pip"

cache:
  paths:
    - .cache/pip
    - venv/

before_script:
  - apt update
  - apt upgrade
  - apt install gcc python3-dev python3-pip libxml2-dev libxslt1-dev zlib1g-dev g++
  - python --version
  - pip install -r requirements.txt

stages:
  - test

unittest:
  stage: test
  script:
    - pwd
    - ls -l
    - export PYTHONPATH="$PYTHONPATH:."
    - python -c "import sys;print(sys.path)"
    - pytest
